"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function defaultHandler(e){return(0,e.content)()}Object.defineProperty(exports,"__esModule",{value:!0});var _extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),propTypes={above:_propTypes.func,breakpoint:_propTypes.string,below:_propTypes.func,children:_propTypes.element.isRequired},defaultProps={breakpoint:"768px",below:defaultHandler,above:defaultHandler},Responsive=function(e){function t(e){(0,_classCallCheck3.default)(this,t);var s=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,e));return s.mql=!1,s.handleChange=s.handleChange.bind(s),s.handleClick=s.handleClick.bind(s),s.content=s.content.bind(s),s.state={match:!0,isClicked:!1},s}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"handleChange",value:function(e){this.setState({match:e.matches,isClicked:!1})}},{key:"handleClick",value:function(){this.setState({isClicked:!this.state.isClicked})}},{key:"newQuery",value:function(e){this.unlisten(),"matchMedia"in window&&(this.mql=window.matchMedia("(min-width: "+this.props.breakpoint+")"),this.handleChange(this.mql),this.mql.addListener(this.handleChange))}},{key:"unlisten",value:function(){this.mql&&this.mql.removeListener(this.handleChange)}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"componentDidMount",value:function(){this.newQuery(this.props.query)}},{key:"componentWillReceiveProps",value:function(e){var t=e.query;this.newQuery(t)}},{key:"content",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.effect,s=e.style,r=e.className,n=e.props,i=_react2.default.Children.only(this.props.children);return _react2.default.createElement(i.type,(0,_extends3.default)({},i.props,t,this.props.effect?this.props.effect(this.state):void 0,{collapse:!0,when:this.state.match||this.state.isClicked,className:r,style:s,props:n}))}},{key:"render",value:function(){var e=this.props[this.state.match?"above":"below"];return _react2.default.createElement(e,(0,_extends3.default)({},this.props,{content:this.content,isToggled:this.state.isClicked,toggle:this.handleClick}))}}]),t}(_react2.default.Component);Responsive.propTypes=propTypes,Responsive.defaultProps=defaultProps,exports.default=Responsive,module.exports=exports.default;